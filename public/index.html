<!DOCTYPE html>
<html>
<head>
	<title>Company Scrap</title>
	<link href='http://fonts.googleapis.com/css?family=Lato&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
	<link href="style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<h1 class="title">Company Scrap</h1>
<div id="homepage">
	
<div id="comps">
	<h1>Scrap all the data from Viadeo</h1>
</div>

</div>

<script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
<script src="https://unpkg.com/react@15/dist/react.js"></script>
<script src="https://unpkg.com/react-dom@15/dist/react-dom.min.js"></script>﻿
</body>


<script type="text/babel">
var Comps = React.createClass({
 getInitialState: function(){
	return({
	comps:[],
	adr:'',
	adr1:'',
	adr2:''
	});
},

	render: function(){
	var comps=this.state.comps;
	var adr=this.state.comps.addr;
	var adr1="";
	var adr2="";
	var adr3="";
	var adr4="";
	var adr5="";




	comps=comps.map(function(comp,index){
	return(

adr=comp.addr,
adr1=adr.replace(/                /g,""),
adr2=adr1.replace(/              /g,""),
adr3=adr2.replace(/ /g,"+"),
adr4 =adr3.slice(0, -1),
adr5=encodeURIComponent(adr4),
console.log(adr4),
console.log(adr5),
		<div key={index}>
		Nom: <span className="nom">{comp.nomEntreprise}</span>
			<img src={comp.img}/> 

	Description:<span className="description">{comp.description}</span>

	Nombre d'epmployée:<span className="nbrEmp">{comp.nbrEmp}</span>
	
	Suivi par:<span className="follwed">{comp.followed}</span>
	




<div>

<h3>Person 💼:</h3>

 {comp.person.map(val => { return <ol><li key={val}>
 {val.nomP} {val.jobP} {val.depuis}
 </li> </ol>
 })}
</div>



   <div class="accordion">
    <section class="accordion-item accordion-item--default">
        <h1>🏬{comp.nomEntreprise}🏬</h1>
        <img src={comp.img}/> 
        <div class="accordion-item-content ">
          <p>{comp.description}</p>
        </div>
    </section>
    <section class="accordion-item">
        <h1>Détails:</h1>
        <div class="accordion-item-content">
          <p> Nombre d'employées : {comp.nbrEmp}</p>
          <p>Suivi par : {comp.followed} {comp.addr}</p>
  <img src={`https://maps.googleapis.com/maps/api/staticmap?center=${adr}&amp;&size=400x400`} alt="exemple" />`
        </div>
    </section>
    <section  class="accordion-item">
        <h1>Social Link</h1>
        <div class="accordion-item-content">


		
<img href={comp.webS}  alt="webS" src="img/startup.png"  width="60" height="60"/>
<img href={comp.twitter}  alt="twitter" src="img/twitter.png"  width="60" height="60"/>
	
        </div>
    </section>
    <section class="accordion-item">
        <h1>💼 Employés 💼:</h1>
        <div class="accordion-item-content">
 

 {comp.person.map(val => { return <ol><li key={val}>
 <img src={val.imgm}/> {val.nomP} {val.jobP} {val.depuis}
 </li> </ol>
 })}
        </div>
    </section>
</div>




		</div>






	);
	});



	

	return(
	<div id="comp-container">
	<form id="search" onSubmit={this.handleSubmit}>
	<label>Enter the company you want to scrap</label>
	<input type="text" ref="comp" placeholder="Enter the company you want to scrap" required/>

	<input type="submit" value="Find Data"/>
	</form>
	<ul>{comps}</ul>

	</div>

	);
	},
	handleSubmit:function(e){
	e.preventDefault();
	var comp = this.refs.comp.value;
	fetch('http://localhost:3000/api/'+comp).then(function(data){
	return data.json();

	}).then(json=>{
	this.setState({
	comps:json
	})
	});

	}
})

ReactDOM.render(<Comps/>, document.getElementById('comps'))


</script>

</html>